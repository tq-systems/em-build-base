# The job expects that FILE, KEY and VALUE are set, ":" is added to $VARIABLE
.fail-if-variable-value-is-found-in-file:
  extends: .image-ubuntu
  script: |
    if grep "$FILE" -e "$VARIABLE:" | grep -q -e "$VALUE"; then
      echo >&2 "Forbidden variable value found in $FILE: $VARIABLE=$VALUE"
      exit 1
    fi

.fail-if-variable-value-is-not-found-in-file:
  extends: .image-ubuntu
  script: |
    if ! (grep "$FILE" -e "$VARIABLE:" | grep -q -e "$VALUE"); then
      echo >&2 "Missing variable value in $FILE: $VARIABLE=$VALUE"
      exit 1
    fi

.before-script-docker-login:
  before_script:
    - docker login $CI_REGISTRY -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD
